<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Project_Bac3.ViewModels"
             x:Class="Project_Bac3.Views.HomeWindowView"
             x:DataType="vm:HomeWindowViewModel">

    <StackPanel Margin="20" Spacing="10">
        
        <!-- YOUR SEARCH BOX -->
        <TextBox Text="{Binding SearchText}"
                 Watermark="Enter player name and press Enter...">
            <TextBox.KeyBindings>
                <!-- This triggers the RelayCommand when Enter is pressed -->
                <KeyBinding Gesture="Enter" Command="{Binding UpdateFilterCommand}"/>
            </TextBox.KeyBindings>
        </TextBox>

        <!-- ADDED: THE LIST -->
        <!-- We bind to 'FilteredPlayers' so the UI updates when we search -->
        <ListBox ItemsSource="{Binding Filtered_Players}" 
                Background="Transparent"
                Margin="0,10,0,0">
            <!-- Remove default ListBox item hover effects for a cleaner look -->
            <ListBox.Styles>
                <Style Selector="ListBoxItem">
                    <Setter Property="Padding" Value="0,5"/>
                    <Setter Property="Background" Value="Transparent"/>
                </Style>
            </ListBox.Styles>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <!-- THE ROUNDED RECTANGLE CARD -->
                    <Border Background="#333333" 
                            CornerRadius="8" 
                            Padding="15" 
                            Margin="5,2"
                            BoxShadow="0 2 5 0 #22000000">
                        
                        <Grid ColumnDefinitions="*, Auto">
                            <!-- Player Name -->
                            <TextBlock Grid.Column="0" 
                                    Text="{Binding Name}" 
                                    FontWeight="Bold" 
                                    FontSize="16" 
                                    Foreground="White"
                                    VerticalAlignment="Center"/>
                            
                            <!-- Rating Badge Look -->
                            <Border Grid.Column="1" 
                                    Background="#444444" 
                                    CornerRadius="4" 
                                    Padding="8,4">
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <TextBlock Text="Elo:" 
                                            Foreground="#AAAAAA" 
                                            FontSize="12" 
                                            VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding EloRating}" 
                                            FontWeight="Bold" 
                                            Foreground="#FFD700" 
                                            FontSize="14" 
                                            VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        
    </StackPanel>
    
</UserControl>